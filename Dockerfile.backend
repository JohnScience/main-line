# syntax=docker/dockerfile:1
# check=skip=SecretsUsedInArgOrEnv

FROM main-line-backend_lib AS backend-lib

WORKDIR /main-line/rust

RUN cargo build --release --package backend

# We do not need the Rust toolchain to run the binary!
FROM debian:bookworm-slim AS runtime
WORKDIR /backend

COPY --from=backend-lib /main-line/rust/target/release/backend /usr/local/bin
EXPOSE 3000
ENTRYPOINT ["/usr/local/bin/backend"]
